<ResourceDictionary
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:ProgressCircleGradient.Controls.ProgressCircle">

    <ResourceDictionary.ThemeDictionaries>
        <ResourceDictionary x:Key="Light">
            <SolidColorBrush x:Key="OneUIProgressCircleDeterminateTextForeground" Color="#252528" />
            <SolidColorBrush x:Key="OneUIProgressCircleDeterminateArcInner" Color="#1919171A" />
            <SolidColorBrush x:Key="OneUIProgressCircleDeterminateArcOuter" Color="#387AFF" />
        </ResourceDictionary>

        <ResourceDictionary x:Key="Dark">
            <SolidColorBrush x:Key="OneUIProgressCircleDeterminateTextForeground" Color="#252528" />
            <SolidColorBrush x:Key="OneUIProgressCircleDeterminateArcInner" Color="#1919171A" />
            <SolidColorBrush x:Key="OneUIProgressCircleDeterminateArcOuter" Color="#387AFF" />
        </ResourceDictionary>

        <ResourceDictionary x:Key="HighContrast">
            <SolidColorBrush x:Key="OneUIProgressCircleDeterminateTextForeground" Color="#252528" />
            <SolidColorBrush x:Key="OneUIProgressCircleDeterminateArcInner" Color="#1919171A" />
            <SolidColorBrush x:Key="OneUIProgressCircleDeterminateArcOuter" Color="#387AFF" />
        </ResourceDictionary>

    </ResourceDictionary.ThemeDictionaries>

    <Style BasedOn="{StaticResource OneUIProgressCircleDeterminate}" TargetType="local:ProgressCircleDeterminate" />

    <Style x:Key="OneUIProgressCircleDeterminate" TargetType="local:ProgressCircleDeterminate">
        <Setter Property="IsTabStop" Value="False" />
        <Setter Property="Foreground" Value="{ThemeResource OneUIProgressCircleDeterminateArcOuter}" />
        <Setter Property="Background" Value="{ThemeResource OneUIProgressCircleDeterminateArcInner}" />
        <Setter Property="HorizontalAlignment" Value="Center" />
        <Setter Property="FontFamily" Value="Segoe UI Variable Light" />
        <Setter Property="VerticalAlignment" Value="Center" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="local:ProgressCircleDeterminate">
                    <Grid x:Name="PART_root">
                        <Grid.RowDefinitions>
                            <RowDefinition />
                            <RowDefinition />
                        </Grid.RowDefinitions>

                        <Grid.ColumnDefinitions>
                            <ColumnDefinition />
                            <ColumnDefinition />
                        </Grid.ColumnDefinitions>

                        <Grid
                            x:Name="PART_ColorGrid"
                            Grid.Row="0"
                            Grid.Column="0"
                            UseLayoutRounding="False">
                            <Canvas x:Name="PART_canvas" UseLayoutRounding="False">
                                <Path
                                    x:Name="PART_OuterPath"
                                    Stroke="{TemplateBinding Foreground}"
                                    Visibility="Visible">
                                    <Path.Data>
                                        <GeometryGroup>
                                            <PathGeometry>
                                                <PathGeometry.Figures>
                                                    <PathFigureCollection>
                                                        <PathFigure x:Name="PART_OuterPathFigure">
                                                            <PathFigure.Segments>
                                                                <PathSegmentCollection>
                                                                    <ArcSegment x:Name="PART_OuterArcSegment" />
                                                                </PathSegmentCollection>
                                                            </PathFigure.Segments>
                                                        </PathFigure>
                                                    </PathFigureCollection>
                                                </PathGeometry.Figures>
                                            </PathGeometry>
                                        </GeometryGroup>
                                    </Path.Data>
                                </Path>

                                <Rectangle
                                    x:Name="PART_GradientLayer"
                                    Canvas.Left="0"
                                    Canvas.Top="0"
                                    Fill="{TemplateBinding Foreground}"
                                    Visibility="Collapsed" />

                                <Path
                                    x:Name="PART_InnerPath"
                                    Stroke="{TemplateBinding Background}"
                                    Visibility="Visible">
                                    <Path.Data>
                                        <GeometryGroup>
                                            <EllipseGeometry x:Name="PART_startEllipse" />
                                            <PathGeometry>
                                                <PathGeometry.Figures>
                                                    <PathFigureCollection>
                                                        <PathFigure x:Name="PART_InnerPathFigure">
                                                            <PathFigure.Segments>
                                                                <PathSegmentCollection>
                                                                    <ArcSegment x:Name="PART_InnerArcSegment" />
                                                                </PathSegmentCollection>
                                                            </PathFigure.Segments>
                                                        </PathFigure>
                                                    </PathFigureCollection>
                                                </PathGeometry.Figures>
                                            </PathGeometry>
                                            <EllipseGeometry x:Name="PART_endEllipse" />
                                        </GeometryGroup>
                                    </Path.Data>
                                </Path>
                            </Canvas>
                        </Grid>
                        <TextBlock
                            x:Name="PART_text"
                            Grid.Row="1"
                            Grid.Column="0"
                            HorizontalAlignment="Center"
                            VerticalAlignment="Center"
                            FontFamily="{TemplateBinding FontFamily}"
                            FontSize="13"
                            FontWeight="Normal"
                            Foreground="{ThemeResource OneUIProgressCircleDeterminateTextForeground}"
                            HorizontalTextAlignment="Center"
                            MaxLines="2"
                            Text="{TemplateBinding Text}"
                            TextAlignment="Center"
                            TextTrimming="CharacterEllipsis"
                            TextWrapping="Wrap"
                            Visibility="Collapsed" />

                        <VisualStateManager.VisualStateGroups>
                            <VisualStateGroup x:Name="CustomStates">
                                <VisualState x:Name="TextVerticalAlignment">
                                    <VisualState.Setters>
                                        <Setter Target="PART_ColorGrid.(Grid.Row)" Value="0" />
                                        <Setter Target="PART_ColorGrid.(Grid.Column)" Value="0" />
                                        <Setter Target="PART_text.(Grid.Row)" Value="1" />
                                        <Setter Target="PART_text.(Grid.Column)" Value="0" />

                                        <Setter Target="PART_ColorGrid.Margin" Value="4" />
                                        <Setter Target="PART_text.Margin" Value="0,0,0,4" />
                                    </VisualState.Setters>
                                </VisualState>
                                <VisualState x:Name="TextHorizontalAlignment">
                                    <VisualState.Setters>
                                        <Setter Target="PART_ColorGrid.(Grid.Row)" Value="1" />
                                        <Setter Target="PART_ColorGrid.(Grid.Column)" Value="0" />
                                        <Setter Target="PART_text.(Grid.Row)" Value="1" />
                                        <Setter Target="PART_text.(Grid.Column)" Value="1" />

                                        <Setter Target="PART_ColorGrid.Margin" Value="4, 4, 4, 4" />
                                        <Setter Target="PART_text.Margin" Value="4,0,4,0" />
                                    </VisualState.Setters>
                                </VisualState>
                            </VisualStateGroup>
                        </VisualStateManager.VisualStateGroups>
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
</ResourceDictionary>